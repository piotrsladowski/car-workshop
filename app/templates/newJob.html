{% extends "base.html" %} {% import 'bootstrap/wtf.html' as wtf %} {% block app_content %}
<div class="text-center">
    <h1>Create a new realization</h1>
</div>
<form method="POST" action="/newJob" id="newr_form" name="rForm" onsubmit="return validateForm()"></form>
<table class="table">
    <tbody>
        <tr>
            <td>
                <label for="rname">Realization name:</label><br>
            </td>
            <td>
                <input type="text" id="rname" name="rname" form="newr_form" required><br>
            </td>
        </tr>
        <tr>
            <td>
                <label>Worker ID</label>
            </td>
            <td>
                <select name="wid" method="GET" action="/" form="newr_form">
                    {% for colour in colours %}
                    <option value="{{colour}}" SELECTED>{{colour}}</option>"
                    {% endfor %}
                </select>
            </td>
        </tr>
        <tr>
            <td>
                <label>Cost</label>
            </td>
            <td>
                <select name="cost" method="GET" action="/" form="newr_form">
                    {% for colour in colours %}
                    <option value="{{colour}}" SELECTED>{{colour}}</option>"
                    {% endfor %}
                </select>
            </td>
        </tr>
        <tr>
            <td>
                <label>Deadline</label>
            </td>
            <td>
                <input type="date" name="deadline" form="newr_form" value="2021-02-01" min="2021-02-01"
                    max="2021-12-31">
            </td>
        </tr>
        <tr>
            <td>
                <label>Status</label>
            </td>
            <td>
                <select name="status" method="GET" action="/" form="newr_form">
                    <option value="new">New</option>
                    <option value="open">Open</option>
                    <option value="rejected">Rejected</option>
                    <option value="finished">Finished</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>
                <input type="submit" form="newr_form">
            </td>
        </tr>
    </tbody>
</table>
{% endblock %}
{% block scripts %}
{{ super() }}
<script>
    function validateForm() {
        var x = document.forms["rForm"]["rname"].value;
        var format = /[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/;
        if (x == "spadaj") {
            var audio = new Audio("{{url_for('.static', filename='audio/DIA_ADDON_BL_BDT_13_GOLD_13_03.OPUS')}}");
            audio.play();
            return false;
        }
        if (format.test(x)) {
            var amarel = getCookie("amarel");
            if (amarel != "") {
                if (amarel == "1") {
                    document.cookie = "amarel=2";
                    var audio = new Audio("{{url_for('.static', filename='audio/INFO_GRD_6_DIELAGE_06_01.OPUS')}}");
                    audio.play();
                } else if (amarel == "2") {
                    document.cookie = "amarel=3";
                    var audio = new Audio("{{url_for('.static', filename='audio/DIA_SEKOB_HALLO_01_00.OPUS')}}");
                    audio.play();
                } else if (amarel == "3") {
                    document.cookie = "amarel=4";
                    var audio = new Audio("{{url_for('.static', filename='audio/DIA_RUMBOLD_PREPERM_10_01.OPUS')}}");
                    audio.play();
                } else if (amarel == "4") {
                    document.cookie = "amarel=5";
                    var audio = new Audio("{{url_for('.static', filename='audio/INFO_Player_PC_Hero_BPANKRATZ3249_Polish.ogg')}}");
                    audio.play();
                } else if (amarel == "5") {
                    document.cookie = "amarel=6";
                    var audio = new Audio("{{url_for('.static', filename='audio/DIA_RAOUL_TROLL_RECHNUNG_B_RAOUL_BLAME_01_00.OPUS')}}");
                    audio.play();
                } else {
                    var audio = new Audio("{{url_for('.static', filename='audio/SVM_8_SMALLTALK18.OPUS')}}");
                    audio.play();
                }
            } else {
                document.cookie = "amarel=1";
                var audio = new Audio("{{url_for('.static', filename='audio/INFO_BLOODWYN_DIE_08_07.OPUS')}}");
                audio.play();
            }

            return false;
        }
    }
    function getCookie(cname) {
        var name = cname + "=";
        var ca = document.cookie.split(';');
        for (var i = 0; i < ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0) == ' ') {
                c = c.substring(1);
            }
            if (c.indexOf(name) == 0) {
                return c.substring(name.length, c.length);
            }
        }
        return "";
    }
</script>
{% endblock %}